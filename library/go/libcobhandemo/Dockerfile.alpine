FROM docker.io/alpine:3

RUN apk add gcc-go build-base git

COPY cobhan/* /cobhan/

COPY libcobhandemo/* /libcobhandemo/

WORKDIR /libcobhandemo

RUN mkdir -p /output

RUN LD_RUN_PATH=\$ORIGIN CGO_ENABLED=1 GOOS=linux go build -v -compiler=gccgo -buildmode=c-shared -o /output/libcobhandemo.so
